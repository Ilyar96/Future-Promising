!function(){const t="cart";function e(){return JSON.parse(localStorage.getItem(t))||[]}function n(e){localStorage.setItem(t,JSON.stringify(e))}function d(){const t=e().reduce(((t,e)=>t+e.quantity),0),n=document.getElementById("headerCartCount");t>0?(n.textContent=t,n.style.display=""):(n.textContent="0",n.style.display="none")}function c(t,e){const n=document.querySelector(`.product-card__add-to-cart[data-product="${t}"]`).closest(".product-card"),d=n.querySelector(".product-card__quantity"),c=n.querySelector(".product-card__quantity-value"),a=n.querySelector(".product-card__add-to-cart"),o=n.querySelector(".product-card__buy-btn");e>0?(d.style.display="flex",c.textContent=e,a&&(a.style.display="none"),o&&(o.style.display="")):(d.style.display="none",c.textContent="0",a&&(a.style.display=""),o&&(o.style.display="none"))}function a(){const t=e();document.querySelectorAll(".product-card__add-to-cart").forEach((e=>{const n=e.getAttribute("data-product"),d=t.find((t=>t.id===n));c(n,d?d.quantity:0)})),d()}function o(t){t&&(t.classList.add("active"),_())}function r(t){t&&(t.classList.remove("active"),document.body.style.overflow="",document.body.style.paddingRight="",document.querySelector(".header").style.paddingRight="")}function i(t,e=".modal__close",n=".modal__overlay"){if(!t)return;const d=t.querySelector(e),c=t.querySelector(n);d&&d.addEventListener("click",(()=>r(t))),c&&c.addEventListener("click",(()=>r(t)))}document.querySelectorAll(".product-card__add-to-cart").forEach((t=>{t.addEventListener("click",(function(a){a.stopPropagation();const o=t.getAttribute("data-product");let r=e(),i=r.find((t=>t.id===o));if(i)i.quantity+=1;else{const t=function(t){const e=document.querySelector(`.product-card__add-to-cart[data-product="${t}"]`).closest(".product-card");return{id:t,name:e.querySelector(".product-card__title").textContent.trim(),price:parseFloat(e.querySelector(".product-card__prcvalue").textContent.trim())}}(o);i={...t,quantity:1},r.push(i)}n(r),c(o,i.quantity),d()}))})),document.querySelectorAll(".product-card").forEach((t=>{const e=t.querySelector(".product-card__add-to-cart").getAttribute("data-product"),n=t.querySelector(".product-card__quantity");if(!n)return;const a=n.querySelector(".product-card__quantity-btn--minus"),o=n.querySelector(".product-card__quantity-btn--plus"),r=a.cloneNode(!0),i=o.cloneNode(!0);a.parentNode.replaceChild(r,a),o.parentNode.replaceChild(i,o),i.addEventListener("click",(function(n){n.stopPropagation();let a=JSON.parse(localStorage.getItem("cart"))||[],o=a.find((t=>t.id===e));if(o)o.quantity++;else{const n=t.querySelector(".product-card__title").textContent.trim(),d=parseFloat(t.querySelector(".product-card__prcvalue").textContent.trim());o={id:e,name:n,price:d,quantity:1},a.push(o)}localStorage.setItem("cart",JSON.stringify(a)),t.querySelector(".product-card__quantity-value").textContent=o.quantity,document.getElementById("productModalQuantityValue").textContent=o.quantity,d(),c(e,o.quantity)})),r.addEventListener("click",(function(n){n.stopPropagation();let a=JSON.parse(localStorage.getItem("cart"))||[],o=a.find((t=>t.id===e));o&&o.quantity>0&&(o.quantity--,o.quantity<=0&&(a=a.filter((t=>t.id!==e))),localStorage.setItem("cart",JSON.stringify(a)),t.querySelector(".product-card__quantity-value").textContent=o.quantity>0?o.quantity:0,document.getElementById("productModalQuantityValue").textContent=o.quantity>0?o.quantity:0,d(),c(e,o.quantity>0?o.quantity:0))}))})),window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".product-card__quantity").forEach((t=>t.style.display="none")),a()}));const l=document.getElementById("cartSidebar"),u=document.getElementById("cartSidebarOverlay"),s=document.getElementById("cartSidebarClose"),m=document.getElementById("cartSidebarList"),y=document.getElementById("cartSidebarTotal"),p=document.getElementById("cartSidebarClear");function _(){document.body.style.overflow="hidden";const t=function(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",t.style.visibility="hidden",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}();t>0&&(document.body.style.paddingRight=t+"px",document.querySelector(".header").style.paddingRight=t+"px")}function g(){o(l),f()}function q(){r(l)}const S=document.querySelector(".header__cart");function f(){const t=e(),n=document.getElementById("cartSidebarCheckout"),d=document.getElementById("cartSidebarClear");m.innerHTML="";let c=0;if(0===t.length)return n.disabled=!0,d.disabled=!0,m.innerHTML='<div style="text-align:center;color:#888;">Cart is empty</div>',void(y.textContent="$0");n.disabled=!1,d.disabled=!1,t.forEach((t=>{c+=t.price*t.quantity;const e=document.querySelector(`.product-card__add-to-cart[data-product="${t.id}"]`).closest(".product-card").querySelector("img"),n=e?e.getAttribute("src"):"",d=e?e.getAttribute("alt"):"",a=document.createElement("div");a.className="cart-sidebar__item",a.innerHTML=`\n\t\t\t<div class="cart-sidebar__item-img-container"><img class="cart-sidebar__item-img" src="${n}" alt="${d}"></div>\n\t\t\t<div class="cart-sidebar__item-info">\n\t\t\t\t<div class="cart-sidebar__item-title">${t.name}</div>\n\t\t\t\t<div class="cart-sidebar__item-cart-footer">\n\t\t\t\t\t<div class="cart-sidebar__item-quantity">\n\t\t\t\t\t\t<button class="cart-sidebar__item-quantity-btn" data-action="minus" data-id="${t.id}"${t.quantity<=1?" disabled":""}>-</button>\n\t\t\t\t\t\t<span class="cart-sidebar__item-quantity-value">${t.quantity}</span>\n\t\t\t\t\t\t<button class="cart-sidebar__item-quantity-btn" data-action="plus" data-id="${t.id}">+</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="cart-sidebar__item-total">$${(t.price*t.quantity).toFixed(2)}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button class="cart-sidebar__item-remove" data-action="remove" data-id="${t.id}" title="Удалить">&times;</button>\n\t\t`,m.appendChild(a)})),y.textContent=`$${c}`}S&&S.addEventListener("click",g),document.querySelectorAll(".product-card__buy-btn").forEach((t=>{t.addEventListener("click",g)})),u.addEventListener("click",q),s.addEventListener("click",q),m.addEventListener("click",(function(t){const a=t.target.closest("button");if(!a)return;const o=a.getAttribute("data-action"),r=a.getAttribute("data-id");let i=e(),l=i.find((t=>t.id===r));l&&("minus"===o?(l.quantity-=1,l.quantity<=0&&(i=i.filter((t=>t.id!==r))),n(i),c(r,l.quantity>0?l.quantity:0),d(),f()):"plus"===o?(l.quantity+=1,n(i),c(r,l.quantity),d(),f()):"remove"===o&&(i=i.filter((t=>t.id!==r)),n(i),c(r,0),d(),f()))})),p.addEventListener("click",(function(){n([]),a(),f()})),window.addEventListener("storage",(function(e){e.key===t&&f()})),window.addEventListener("DOMContentLoaded",(function(){l.classList.contains("active")&&f()}));const b=document.getElementById("cartSidebarCheckout"),v=document.getElementById("modal"),E=(document.getElementById("modalClose"),document.getElementById("modalTitle")),I=document.getElementById("modalDetails"),C=document.getElementById("modalForm");function h(){e().length&&(E.textContent="Order checkout",C.style.display="",o(v))}b.addEventListener("click",(function(){0!==e().length&&(q(),setTimeout(h,300))})),i(v),C.addEventListener("submit",(async function(t){t.preventDefault();const e=C.querySelector("button[type='submit']"),d=e.textContent;e.disabled=!0,e.textContent="Sending...",await new Promise((t=>setTimeout(t,1e3))),e.disabled=!1,e.textContent=d,C.style.display="none",I.innerHTML='<div id="modalOrderStatus" style="color:var(--color-success,green);text-align:center;font-weight:600;padding:20px;">Your order has been sent successfully!</div>',n([]),a(),setTimeout((()=>{r(v),setTimeout((()=>{document.getElementById("modalOrderStatus").remove(),C.reset(),C.style.display=""}),300)}),4e3)}));const L=document.getElementById("contactForm"),x=document.getElementById("contactSuccessModal");document.getElementById("contactSuccessModalClose");function B(){const t=document.querySelector(".header");window.scrollY>0?t.classList.add("scrolled"):t.classList.remove("scrolled")}L&&L.addEventListener("submit",(async function(t){t.preventDefault();const e=L.querySelector("button[type='submit']"),n=e.textContent;e.disabled=!0,e.textContent="Sending...",await new Promise((t=>setTimeout(t,1e3))),e.disabled=!1,e.textContent=n,L.reset(),o(x),setTimeout((()=>{r(x)}),4e3)})),i(x),B(),window.addEventListener("scroll",B),document.querySelectorAll(".product-card__title, .product-card__image").forEach((t=>{t.addEventListener("click",(function(){const e=t.closest(".product-card"),n=e.querySelector(".product-card__add-to-cart").getAttribute("data-product"),d=e.querySelector(".product-card__title").textContent.trim(),c=d.match(/([0-9]+\s?T[Hh])/),a=c?c[1]:"",o=e.querySelector(".product-card__info-item:nth-child(3) span").textContent.trim(),r=e.querySelector(".product-card__info-item:nth-child(2) span").textContent.trim(),i=e.querySelector(".product-card__prcvalue").textContent.trim(),l=e.querySelector("img").getAttribute("src"),u=(JSON.parse(localStorage.getItem("cart"))||[]).find((t=>t.id===n)),s=u?u.quantity:0;document.getElementById("productModalImage").innerHTML=`<img src="${l}" alt="${d}">`,document.getElementById("productModalTitle").textContent=d,document.getElementById("productModalHashrate").innerHTML=`<span class="product-modal__label">Hashrate: </span>${a}`,document.getElementById("productModalEfficiency").innerHTML=`<span class="product-modal__label">Power efficiency: </span> <span class="product-modal__accent">${o}</span>`,document.getElementById("productModalPriceHashrate").innerHTML=`<span class="product-modal__label">Price/T: </span><span class="product-modal__price-unit">$</span><span class="product-modal__accent">${(i/parseFloat(a)).toFixed(1)}</span>`,document.getElementById("productModalPower").innerHTML=`<span class="product-modal__label">Power: </span>${r}`,document.getElementById("productModalPrice").innerHTML=`<span class="product-modal__label">Price: </span><span class="product-modal__price-container"><span class="product-modal__price-unit">$</span><span class="product-modal__price-value">${i}</span></span>`,document.getElementById("productModalQuantityValue").textContent=s,document.getElementById("productModal").setAttribute("data-product-id",n),document.getElementById("productModal").classList.add("active"),$(s)}))})),document.getElementById("productModalClose").onclick=function(){document.getElementById("productModal").classList.remove("active")},document.querySelector(".product-modal__overlay").onclick=function(){document.getElementById("productModal").classList.remove("active")},document.querySelector(".product-modal__quantity-btn--plus").onclick=function(){const t=document.getElementById("productModal").getAttribute("data-product-id");let e=JSON.parse(localStorage.getItem("cart"))||[],n=e.find((e=>e.id===t));if(n)n.quantity++;else{const d=document.querySelector(`.product-card__add-to-cart[data-product="${t}"]`).closest(".product-card"),c=d.querySelector(".product-card__title").textContent.trim(),a=parseFloat(d.querySelector(".product-card__prcvalue").textContent.trim());n={id:t,name:c,price:a,quantity:1},e.push(n)}localStorage.setItem("cart",JSON.stringify(e)),document.getElementById("productModalQuantityValue").textContent=n.quantity,c(t,n.quantity),d(),$(n.quantity)},document.querySelector(".product-modal__quantity-btn--minus").onclick=function(){const t=document.getElementById("productModal").getAttribute("data-product-id");let e=JSON.parse(localStorage.getItem("cart"))||[],n=e.find((e=>e.id===t));n&&n.quantity>0&&(n.quantity--,n.quantity<=0&&(e=e.filter((e=>e.id!==t))),localStorage.setItem("cart",JSON.stringify(e)),document.getElementById("productModalQuantityValue").textContent=n.quantity>0?n.quantity:0,c(t,n.quantity>0?n.quantity:0),d(),$(n.quantity>0?n.quantity:0))};const M=document.querySelector(".product-modal__buy-now");function $(t){const e=document.querySelector(".product-modal__buy-now");e&&(e.disabled=0===t)}M&&(M.onclick=function(){document.getElementById("productModal").classList.remove("active");const t=document.getElementById("cartSidebar");t&&(t.classList.add("active"),_(),f())})}();